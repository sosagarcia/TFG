<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css"
    />
    <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <button id="update">Update</button>
    <div class="ct-chart ct-perfect-fourth"></div>

    <script>
      var myChart;
      var getData = $.get("/dataD");

      getData.done(function(results) {
        console.log(results.results);
        var data = {
          // A labels array that can contain any sort of values
          labels: ["Mon", "Tue", "Wed", "Thu", "Fri"],
          // Our series array that contains series objects or in this case series data arrays

          series: results.results
        };

        var options = {
          width: 800,
          height: 600
        };

        myChart = new Chartist.Line(".ct-chart", data, options);
      });

      function updateChart() {
        var updateData = $.get("/dataD");
        updateData.done(function(results) {
          var data = {
            // A labels array that can contain any sort of values
            labels: results.labels,
            // Our series array that contains series objects or in this case series data arrays

            series: results.results
          };
          myChart.update(data);
        });
      }
      $("#update").on("click", updateChart);
    </script>
  </body>
</html>
